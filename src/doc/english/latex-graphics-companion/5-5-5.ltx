\documentclass{ppex}
\nonstopmode
\usepackage [matrix,curve,arrow,tips,frame]{xy}
\pagestyle{empty}
\setlength\textwidth{183.0pt}
\begin{document}
\ResetPreambleCommands
\ReadyForTheFray
\usepackage [matrix,curve,arrow,tips,frame]{xy}
\[\UseTips
\entrymodifiers={++[o][F]}
\xymatrix @-1mm {
 *+\txt{in} \ar[r]
& 1 \ar@(dr,dl)[]^b \ar[r]_a
& 2 \ar@(d,dl)[]^a  \ar[r]_b
& 3 \ar `u[l] `^d[l]_a [l] \ar[r]_b
& *++[o][F=]{4}
  \ar `dl_l[ll]+/d6mm/`l_ul[ll]^a [ll]
  \ar `u^l[lll]+/u1cm/`l^d[lll]_b [lll]
}\]
\end{document}
