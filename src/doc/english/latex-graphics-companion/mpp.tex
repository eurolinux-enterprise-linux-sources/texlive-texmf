% File mpp.tex
% include file for MusixTeX 
%
\input musixtex
\input musixadd
 
\catcode`@=11 % treat at signs as letters

%  \y@v\noteskip \multiply\y@v\n@v
%\qn@width and \elemskip


%\def\notesh{\vnotes\p@seven\elemskip}% 16th trio
%\def\notesh{\vnotes1.4\elemskip}% 16th trio
\def\notesh{\vnotes\elemskip}%        16th trio
%\def\notes{\vnotes2\elemskip}%       16th
%\def\notesp{\vnotes2\h@lf\elemskip}% 16th point=8 trio
%\def\Notesh{\vnotes1\h@lf\elemskip}% 8th trio, ok but bit too tight
%\def\Notesh{\vnotes2.25\elemskip}%    8th trio
\def\Notesh{\vnotes2\elemskip}%       8th trio
%\def\Notes{\vnotes3\elemskip}%       8th
\def\NOtesh{\vnotes4\elemskip}%       4 trio

\def\emtpy{}
%silly name
\let\rightleftrepeat\leftrightrepeat
\def\gobble#1{}
\def\ugobble#1{}
\def\lgobble#1{}
\def\atswap#1#2{\zcharnote{#2}{#1}}
\let\uatswap\atswap
\let\latswap\atswap
\def\finger#1#2{\atswap{{\smalltype\bf#1}}{#2}}
\let\ufinger\finger
\let\lfinger\finger
%
\def\text#1#2{\atswap{{\ppffstyle #1}}{#2}}
\let\utext\text
\let\ltext\text
%
\def\xplet#1{\atswap{\xpletstyle{#1}}}
\let\uxplet\xplet
\let\lxplet\xplet
%
\def\uupbow{\atswap{\upbow}}
\def\lupbow{\atswap{\upbow}}
\def\udownbow{\atswap{\downbow}}
\def\ldownbow{\atswap{\downbow}}
%
\def\ufermata{\fermataup}
\def\lfermata{\fermatadown}
%
\def\utrille#1{\text{\hbox to 0pt{tr\hss}}{#1}}
\def\ushake#1{\rlap{\shake{#1}}}
%
%\def\ucsh#1{\raise3\Interligne\hbox{\hsk\hsk\csh{#1}\bsk\bsk}}
%\def\ucsh#1{\raise3\Interligne\hbox{\hsk\hsk\csh{#1}\bsk}}
\def\ucsh#1{\raise3\Interligne\rlap{\hsk\csh{#1}}}
%
%FMi\voffset-10mm
\vsize120mm
\hsize30.5pc
\parindent5mm
\nopagenumbers
%
%redefine notes
\let\lwh\lw
\let\rwh\rw
\let\zc\zq
%
%complete set of note macro
\def\rwp#1{\pt{#1}\rw{#1}}
\def\lwp#1{\pt{#1}\lw{#1}}
%
\def\rhup#1{\pt{#1}\rhu{#1}}
\def\rhlp#1{\pt{#1}\rhl{#1}}
\def\lhup#1{\pt{#1}\lhu{#1}}
\def\lhlp#1{\pt{#1}\lhl{#1}}
%
\def\rhup#1{\pt{#1}\rhu{#1}}
\def\rhlp#1{\pt{#1}\rhl{#1}}
\def\lhup#1{\pt{#1}\lhu{#1}}
\def\lhlp#1{\pt{#1}\lhl{#1}}
%
\def\rqup#1{\pt{#1}\rqu{#1}}
\def\rqlp#1{\pt{#1}\rql{#1}}
\def\lqup#1{\pt{#1}\lqu{#1}}
\def\lqlp#1{\pt{#1}\lql{#1}}
%\def\rqp#1{\pt{\rq{#1}}
\def\rqp#1{\rq{.#1}}
\def\lqp#1{\pt\lq{#1}}
\def\rqb#1#2{\rq{#2}}
\def\lqb#1#2{\lq{#2}}
%
\def\rcup#1{\pt{#1}\rcu{#1}}
\def\rclp#1{\pt{#1}\rcl{#1}}
\def\lcup#1{\pt{#1}\lcu{#1}}
\def\lclp#1{\pt{#1}\lcl{#1}}
%\let\rc\rq
%\let\lc\lq
\def\rc#1{\rq{#1}}
\def\lc#1{\lq{#1}}
\def\rcp#1{\pt\rq{#1}}
\def\lcp#1{\pt\lq{#1}}
%
%shifted points
\def\rpt#1{\kern\qn@width\advancefalse\pt{{#1}}\kernm\qn@width}
\def\rppt#1{\kern\qn@width\advancefalse\ppt{{#1}}\kernm\qn@width}
%
%redefine rests
\let\whs\pause
\let\ccs\qs
\let\cccs\hs
\let\hs\hpause
\let\qs\qp
%\let\qsp\qpp
\def\qsp{\qp\ds}
\def\qps{\qp\ds}
%\let\cs\ds
\def\cs{\ds}
\let\csp\dsp
\let\ccsp\qsp
\let\ccccs\qqs
%
\let\zqs\qs
\def\zcs{\cs}
%
%redefine accents: portato and staccato ( pizzicato is not an accent )
\let\upt\ust
\let\lpt\lst
\let\ust\upz
\let\lst\lpz
\let\usp\uppz
\let\lsp\lppz
\let\bupt\bust
\let\blpt\blst
\let\bust\bupz
\let\blst\blpz
\let\busp\buppz
\let\blsp\blppz
%
\def\thesubtitle{}
\def\thelefttitle{}
\def\therighttitle{}
\def\thecomposer{}
\def\thetempo{}
\def\themetron{}
\let\composer\righttitle
%
%complete accidentals
\def\dna#1{\lna{#1}\na{#1}}
\def\ldna#1{\llna{#1}\lna{#1}}
\def\lldna#1{\lllna{#1}\llna{#1}}
\def\llna#1{\loffset2\smallvalue{\na{#1}}}
\def\llfl#1{\loffset2\smallvalue{\fl{#1}}}
\def\llsh#1{\loffset2\smallvalue{\sh{#1}}}
\def\lldfl#1{\loffset2\smallvalue{\dfl{#1}}}
\def\lldsh#1{\loffset2\smallvalue{\dsh{#1}}}
\def\lllna#1{\loffset3\smallvalue{\na{#1}}}
%
% bar numbering
\def\barnumbering#1{
  \ifnum#1=\z@\nobarnumbers
  \else\barnumbers\def\freqbarno{#1}\fi}

% really boxed barnumbers

\def\wbarno@x{\lastbarpos\lin@pos \writ@volta
  \ifx\iv@sw\@ne
    \i@v\lin@pos \let\iv@sw\empty \let\tx@V\tx@v
    \ifx\pv@sw\empty \let\v@sw\@ne \fi
  \else
    \n@iii\barno \divide\n@iii\freqbarno\relax
    \ifnum\n@iii=\lastbarno
    \else \y@\altplancher \advance\y@\systemheight \advance\y@\tw@\internote
%      \raise\y@\llap{\it\the\barno\kernm\qn@width}\fi
      \advance\y@\raisebarno\raise\y@\llap{\putbarno\kernm\qn@width}\fi
  \fi
  \n@iii\barno \divide\n@iii\freqbarno\relax \lastbarno\n@iii }

\def\italic{\it\the\barno}
\def\boxed{\boxit{\eightbf\the\barno}}
\def\putbarno{\italic}
\def\writebarno{\putbarno}
\let\old@systemnumbers\systemnumbers
\def\systemnumbers{\gdef\raisebarno{\f@ur\internote}\old@systemnumbers}
\def\writebarno{\putbarno}
\def\raisebarno{\@ne\internote}
%
\let\idecresc\icresc

\def\smallsk{\off{\smallvalue\qn@width}}
\def\smallsk{\hsk}
\def\smallsk{\off{\qu@rt\noteskip}}
\def\smallsk{\off{\smallvalue\elemskip}}
%no occasionally small accidentals
\bigaccid
\def\putdynamics#1{\llap{#1\hskip.2em}}
%\batchmode

\catcode`@=12 % at signs are no longer letters

\smallmusicsize

%% end: mpp.tex

