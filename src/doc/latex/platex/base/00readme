%% Staszek Wawrykiewicz (StaW@gust.org.pl), January 2003.  Public domain.
%% Web2c (teTeX, fpTeX, TeX Live) and MiKTeX 2.x revision
PLaTeX and pdfPLaTeX

Dokumentacja po polsku i po angielsku (nizej).
The documentation in Polish and in English (below).

------------------------------------------------------------------------
POLSKI (iso8859-2):
------------------------------------------------------------------------

Dokumentacja niniejsza omawia pokrótce tworzenie formatów dla programów tex
i pdftex (wersji TeX-a tworz±cej od razu pliki PDF) ze wsparciem dla jêzyka
polskiego i ich u¿ycie w ¶rodowisku opartym na web2c (dystrybucje TeX
Live/teTeX/fpTeX) lub MiKTeX.

Poni¿ej pokazano prosty przyk³ad tworzenia pliku z u¿yciem pakietu PLaTeX.
Pakiet ten dostarcza narzêdzi potrzebnych do sk³adu dokumentów w jêzyku
polskim LaTeXem 2e.
Autorzy pakietu: Mariusz Olko i Marcin Woliñski.
Wiêcej informacji na temat samego pakietu -- patrz plik czytaj.txt
dystrybucji PLaTeX.

Ponadto w dystrybucjach do³±czono przyk³adowy plik
doc/latex/platex/tstlatex.tex. s³u¿±cy do przetestowania poprawnego
dzia³ania formatu LaTeX/PLaTeX. Pocz±tkuj±cym u¿ytkownikom zaleca siê
zapoznanie z zawarto¶ci± tego pliku. Plik ten dostêpny jest tak¿e na
serwerze GUST. Techniczne szczegó³y dotycz±ce u¿ycia pakietu polski.sty
(g³ówny element pakietu platex) dostêpne s± po dwukrotnym uruchomieniu:
platex polski.dtx
platex polski.dtx
i wy¶wietleniu wynikowego polski.dvi.

---------------------------------------------------------------------------

I. Przygotowanie formatu LaTeX2e do obs³ugi jêzyka polskiego

Format w systemie TeX to wstêpnie prekompilowany (aby przyspieszyæ jego
analizê przez program tex/pdftex) zestaw makrodefinicji oraz regu³
przenoszenia wyrazów dla wybranego zestawu jêzyków. Plik formatu z regu³y
posiada rozszerzenie .fmt. Tworzenie formatu to, w skrócie, uruchomienie
programu tex/pdftex z opcj± --ini i wczytanie odpowiedniego pliku
inicjuj±cego (dla LateX jest to plik latex.ltx). W LaTeX 2e zestaw regu³
przenoszenia wyrazów jest zwyczajowo deklarowany w pliku o nazwie
language.dat. Plik ten znajduje siê zwykle w podkatalogu
tex/generic/config/language.dat lokalnej konfiguracji systemu TeX b±d¼
w identycznym podkatalogu katalogu g³ównego instalacji. Modyfikacja
language.dat polega na usuniêciu w tym pliku znaku komentarza `%' w wierszu
polish plhyph.tex
i ewentualnym zablokowaniu takim znakiem niepo¿±danych deklaracji wzorców
dzielenia wyrazów. Przygotowanie formatu:

   * standardowe: w teTeX nale¿y uruchomiæ program texconfig, uaktywniæ
     regu³y dzielenia wyrazów dla jêzyka polskiego (menu Hyphenation
     uruchamia edycjê pliku language.dat; po zapisaniu zmian w pliku
     i zakoñczeniu edycji, zostanie automatyczne wygenerowany format
     latex.fmt zawieraj±cy wybrane wzorce dzielenia oraz mechanizm Babel
     prze³±czania jêzyków; texconfig tworzy ponadto dowi±zanie (lub
     program) latex.
     Dla dociekliwych: powy¿sze odpowiada uruchomieniu z linii poleceñ:
     fmtutil --byfmt latex
     za¶ na ni¿szym poziomie -- poleceniu
     tex --ini --progname=latex latex.ini
     W instalacji MiKTeX (od wersji 2.0) nale¿y uruchomiæ menu MiKTeX
     Options, zaznaczyæ w podmenu Languages: polish regu³y przenoszenia
     wyrazów, po czym w menu TeX Formats wygenerowaæ (przyciskiem Build)
     nowy format latex.fmt, zawieraj±cy polskie wzorce.
     Format pdflatex.fmt dla programu pdftex tworzony jest analogicznie.

   * niestandardowe, które tworzy ,,czysty'' format LaTeX2e zawieraj±cy
     jedynie wybrane wzorce dzielenia wyrazów, bez zbêdnych mechanizmów
     Babel. Jest to metoda preferowana przez wielu polskich u¿ytkownikow.
     ;-) Dlaczego PLaTeX a nie Babel? O tym poni¿ej. Dla odró¿nienia
     przyjêto nazywaæ taki format platex (lub pdfplatex dla pdfTeX).
     Formaty te korzystaj± z ,,prywatnej'' kopii pliku language.dat
     z zadeklarowanymi od razu polskimi i angloamerykanskimi wzorcami
     przenoszenia wyrazów. Procedura opisana w poprzednim punkcie pozwala
     na wygenerowanie takich formatów za pomoc± programu texconfig: menu
     Formats uruchamia edycjê pliku fmtutil.cnf, nale¿y tu odblokowaæ
     wiersz dotycz±cy formatu platex lub pdfplatex (usun±æ znak # przed
     deklaracj± interesuj±cego nas formatu) i , po zapisaniu pliku,
     powróciæ do menu nadrzêdnego; ,,w tle'' zostanie wykonany program
     fmtutil; utworzone zostanie ponadto dowi±zanie platex (pdfplatex).
     W wypadku gdy nie mamy (jeszcze) programu texconfig (fpTeX dla
     Windows) procedura generowania formatu platex (lub pdfplatex) da siê
     przedstawiæ nastêpuj±co:
       1. nale¿y odszukaæ plik texmf/web2c/fmtutil.cnf (edytujemy kopiê
          tego pliku znajduj±c± si± w lokalnym drzewie katalogów TeX-owych
          u¿ytkownika lub w drzewie przeznaczonym na lokalne konfiguracje;
          po³o¿enie w³a¶ciwego pliku poka¿e uruchomienie polecenia
          kpsewhich fmtutil.cnf);
       2. w pliku fmtutil.cnf nale¿y odblokowaæ wiersz dotycz±cy formatu
          platex lub pdfplatex (usun±æ znak #);
       3. uruchomiæ polecenie: fmtutil --byfmt platex --dolinks (lub
          fmtutil --byfmt pdfplatex --dolinks).
     Dla MiKTeX (od wersji 2.0) nale¿y uruchomiæ menu MiKTeX Options,
     w podmenu TeX Formats zaznaczyæ format PLaTeX (lub pdfPLaTeX)
     i utworzyæ (przyciskiem Build) potrzebne formaty.

     W omawianych wy¿ej przypadkach tworzony jest plik formatu platex.fmt
     (lub pdfplatex.fmt), który jest umieszczany w katalogu w³a¶ciwym dla
     tego rodzaju plików, oraz tworzony jest program platex lub pdfplatex
     (uruchamia on program tex lub pdftex z odpowiednim formatem).

Dlaczego PLaTeX a nie Babel?

(Fragment ten jest cytatem z listu nades³anego na listê dyskusyjn± GUST
przez Marcina Woliñskiego).
W porównaniu do pakietu Babel, PLaTeX ma kilka mniej lub bardziej istotnych
zalet:

   * PLaTeX udostêpnia tradycyjne definicje nazw polskich funkcji
     trygonometrycznych \tg, \ctg, \arc i polskich znaków mniejsze-równe
     oraz wiêksze-równe.
   * PLaTeX umie poprawne przenosiæ wyrazy z³o¿one (tj. takie jak np.
     bia³o-czerwony) udostêpniaj±c do tego celu polecenie \dywiz.
   * PLaTeX wstawia prawid³owe odstêpy na koñcu zdania.
   * Babel nie wspiera do koñca fontów w uk³adzie OT4 (fontów PL), co
     powoduje, ¿e polskie znaki diakrytyczne w wyrazach wstawianych
     automatycznie przez LaTeX (dok³adnie ,,ê'' w s³owie czê¶æ oraz ,,±''
     w s³owie ,,za³±cznik'') sklejane z dwóch znaków. Jest to drobny, ale
     ci±gle nie usuniêty b³±d. (Mo¿na go poprawiæ samodzielnie dokonuj±c
     niewielkiej modyfikacji pliku polish.sty z dystrybucji pakietu Babel.)
     Obwiedniowe fonty OT4 s± niezast±pione przy tworzeniu plików
     w formacie PDF.

Podsumowuj±c: je¿eli nie potrzebujemy ¶rodowiska wielojêzycznego to du¿o
mniejsza objêto¶æ pakietu PLaTeX oznacza tak¿e mniejsz± liczbê b³êdów
i potencjalnych kolizji z innymi czê¶ciami LaTeXa.
[achiwum GUST-L, list z 06/06/1997]
---------------------------------------------------------------------------

II. U¿ycie

Aktualne implementacje, oparte na Web2c, a tak¿e MiKTeX pozwalaj± na
prawid³owe przekodowanie znaków diakrytycznych w pliku TeX-owym na
wewnêtrzn± reprezentacjê, stosowan± przez programy. W Polsce, niestety,
stosowane s± ró¿ne ,,standardy'' kodowania diakrytyków w tworzonych przez
u¿ytkownika plikach, zale¿nie od systemu operacyjnego. Dla potrzeb systemu
TeX u¿ywamy zewnêtrznych, tekstowych plików TCX, pozwalaj±cych ,,obs³u¿yæ''
ró¿ne spotykane ,,standardy''. Dziêki temu przekodowanie dzia³a te¿ w drug±
stronê, kiedy TeX wy¶wietla komunikaty i zapisuje pliki .log, a tak¿e pliki
ze spisem tre¶ci, skorowidzem itp.

Uruchomienie polecenia:
latex --translate-file=TCXFILE myfile.tex
oznacza uruchomienia TeX-a z formatem latex.fmt i z odpowiedni± tablic±
przekodowañ (ich lista znajduje siê poni¿ej). W identyczny sposób
uruchamiamy polecenie platex.

Przekodowanie (plik TCX) mo¿e byæ deklarowane bezpo¶rednio w pliku
TeX-owym. Pocz±wszy od wersji Web2c 7.4, wymaga to podania w wierszu
poleceñ opcji --parse lub w³±czenia jej na sta³e, co wymaga zmiany
w g³ównym pliku konfiguracyjnym texmf.cnf:
parse_first_line = t
(t -- od `true', zamiast domy¶lnego przypisania f -- od `false').

Przyk³adowo, je¶li pierwszy wiersz pliku zawiera komentarz strukturalny
postaci
%&platex --translate-file=il2-pl
to plik mo¿e byæ przetworzony za pomoc± polecenia tex plik.tex; zostanie
wtedy wczytany format platex.fmt oraz tablica il2-pl.tcx przekodowania
z uk³adu iso8859-2 (latin2) do uk³adu fontów PL (wewnêtrznego dla programu
TeX; w LaTeX-u ma on kryptonim OT4).

Tym samym zbêdne s± deklaracje w preambule pliku LaTeX-owego:
\usepackage[latin2]{inputenc}
\usepackage[OT4]{fontenc}

W dystrybucjach dostarczono szereg plikow TCX. Mo¿na je znale¼æ w katalogu
texmf/web2c/:
 amiga-pl.tcx  AmigaPL do PL
 il2-pl.tcx    iso8859-2 (latin2) do PL
 cp1250pl.tcx  Windows cp1250 do PL
 cp852-pl.tcx  IBM cp852 do PL
 macce-pl.tcx  Apple MacCE do PL
 maz-pl.tcx    Mazovia do PL

A oto przyk³ad pliku LaTeX-owego:

        %& --translate-file=cp1250pl
        \documentclass[a4paper]{article}
        \usepackage{polski}
        \begin{document}
          Polskie literki piszemy w standardzie Windows cp1250: .....
        \end{document}

Jak widaæ, nasz plik ma krótk± preambu³ê -- pakiet polski korzysta
domy¶lnie z zainstalowanych fontów PL (odpowiada mu uk³ad OT4, wiêc zbêdna
jest deklaracja \usepackage[OT4]{fontenc}). Je¶li korzystamy 
z fontów EC nasza preambu³a powinna zawieraæ dodatkowy wiersz:
\usepackage[T1]{fontenc}

III. Polskie fonty PostScriptowe

Aktualne dystrybucje zawieraj± fonty serii PL (spolonizowane standardowe
dla TeX-a fonty CM) w wersji Type 1 (postscriptowe). Mo¿na je tak¿e znale¼æ
w najbli¿szym wê¼le CTAN lub jego kopii, np.:
ftp://sunsite.icm.edu.pl/CTAN/fonts/psfonts/polish/plpsfont/.
Pliki .pfb powinny znale¼æ siê w podkatalogu texmf/fonts/type1/public/pl/
naszej instalacji, za¶ pliki map fontowych (.map) oraz wektory kodowañ
(.enc) -- w katalogu texmf/dvips/pl/

W dystrybucjach opartych na Web2c zautomatyzowano, poprzez u¿ycie programu
updmap, proces tworzenia map fontowych dla programów dvips, pdftex
i dvipdfm. Poni¿ej omówiono wiêc jedynie czego ten proces dotyczy.

Sterownik dvips (zamieniaj±cy wynik pracy TeX-a, plik DVI, do formatu
PostScript) wymaga aby deklaracje map fontowych (dla fontów PL konkretnie
zawarto¶æ texmf/dvips/pl/pl.map) by³y do³±czone do pliku
texmf/dvips/config/psfonts.map. Mapy fontowe mo¿na alternatywnie do³±czyæ
w pliku texmf/dvips/config/config.ps (lub jego lokalnej kopii), dopisuj±c
wiersz:
p +pl.map
po deklaracji g³ównej mapy fontowej: p psfonts.map.

Aby fonty Type 1 by³y u¿yte przez program pdfTeX, nale¿y sprawdziæ jakie
mapy fontowe s± deklarowane w pliku texmf/dvips/config/pdftex.map --
powinien on tak¿e zawieraæ deklaracje map fontowych dla fontów PL.

W dystrybucjach wszystkie aktualnie dostêpne polskie fonty Type1 s± gotowe
do u¿ycia zarówno przez program dvips, jak i pdftex.

Bardziej szczegó³owe omówienie instalacji fontów Type1 zawarte jest
w artykule Instalowanie fontów Type1/True Type.

------------------------------------------------------------------------
ENGLISH:
------------------------------------------------------------------------

PLaTeX provides tools to typeset documents in Polish using LaTeX2e.
Authors: Mariusz Olko & Marcin Woli\'nski.
This document describes shortly creation of latex.fmt (or platex.fmt)
for Polish and usage in MiKTeX environement.
See readme.txt for more informations about the PLaTeX package.

I. Preparing LaTeX2e format for Polish
   There are two methods:
   1. `standard': just activate polish hyphenation patterns in the file
       language.dat (menu `Hyphenation' in teTeX's texconfig or `Languages' 
       in `MiKTeX Options') and recompile latex.ltx (for MiKTeX 2.x from the
       menu `TeX Formats'); as a result, latex.fmt including Babel machinery
       will be generated.
   2. `non standard': it produces a clean and generic LaTeX2e without Babel
       deadwood, containing only patterns for Polish and US English; this
       method is prefered by many users in Poland. ;-)
       The distribution allows to generate such a format: platex.fmt
       (or pdfplatex.fmt) from teTeX's texconfig `Formats' menu (for MiKTeX
       `TeX Formats' menu).

II. Usage: the current implementations based on web2c, and MiKTeX
    allow (hopefully) proper reencoding of input national characters 
    into internal TeX's, and back again, for all messages, .log, .toc, 
    .idx files written by TeX, etc. External readable TCX translation 
    files are used and they can be specified explicitly in the TeX file 
    or in the command line.
    If we use latex.fmt with Polish patterns we can compile our file
    with the command `latex --translate-file=TCXFILE myfile.tex'.
    If the parse_fist_line is enabled (`--parse' option in the command line
    or, permanently, parse_fist_line=t in texmf.cnf)
    and the *first* line of TeX's file contains a structured comment
    of the form
        %&platex --translate-file=il2-pl
    it suffices to run `tex file.tex' with platex.fmt and il2-pl.tcx
    translation table (iso8859-2 to internal PL reencoding, which in fact
    is recognized as LaTeX's OT4).
    You can use TCX tables instead of LaTeX's
        \usepackage[latin2]{inputenc}
	\usepackage[OT4]{fontenc}
    We can make a `platex' command available making on Unix a soft link
    to tex, or (Windows) making a copy tex.exe into platex.exe in the 
    directory containing binaries.
    Thus `platex -translate-file=TCXFILE myfile.tex' can be used as well.
    Several TCX files are provided; they can be found in the .../web2c/
    directory:
           amiga-pl.tcx   AmigaPL <--> PL encoding
           il2-pl.tcx     iso8859-2 (latin2) <--> PL encoding
           cp1250pl.tcx   Windows cp1250 <--> PL encoding
           cp852-pl.tcx   IBM cp852 <--> PL encoding
	   macce-pl.tcx   Apple MacCE <--> PL
           maz-pl.tcx     Mazovia <--> PL encoding

III. Polish PostScript fonts in Type 1 format
     The installation can already contain Type 1 PL fonts;
     they can be also downloaded from the nearest CTAN node or its mirror:
         CTAN//fonts/psfonts/polish/plpsfont/
     or copied from the CD TeX Live.
     .pfb files should reside in the directory: .../fonts/type1/public/pl/ ;
     font map and encoding files should go to .../dvips/pl/ directory.

     The preparation of map files are now automatized by running updmap
     program.
     
     Dvips can be prepared for using PL fonts in Type 1 format in two ways:
     * the contents of texmf/dvips/pl/pl.map should be included
       into the standard texmf/dvips/config/psfonts.map.
     * in texmf/dvips/config/config.ps the additional map file can be
       declared after standard `p psfonts.map' line:
       p +pl.map

     In order to use Type 1 fonts with pdfTeX, the contents of 
     texmf/dvips/config/pdftex.map file can be updated with
     the contents of pl.map, or the line
     map +pl.map
     can be added to the file texmf/pdftex/config/pdftex.cfg.

---------------------------------------------------------------------------
